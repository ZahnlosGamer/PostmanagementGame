[gd_scene load_steps=14 format=3]

[ext_resource path="res://scripts/GameManager.gd" type="Script" id=1]
[ext_resource path="res://scenes/ui/HUD.tscn" type="PackedScene" id=2]
[ext_resource path="res://scripts/LogisticsNetwork.gd" type="Script" id=3]
[ext_resource path="res://default_env.tres" type="Environment" id=4]

[sub_resource type="PlaneMesh" id=1]
size = Vector2(120, 120)

[sub_resource type="FastNoiseLite" id=2]
frequency = 0.02
fractal_octaves = 4
fractal_gain = 0.5

[sub_resource type="NoiseTexture2D" id=3]
width = 1024
height = 1024
seamless = true
noise = SubResource(2)

[sub_resource type="StandardMaterial3D" id=4]
albedo_texture = SubResource(3)
roughness = 1.0
uv1_scale = Vector3(3, 3, 1)

[sub_resource type="SphereMesh" id=5]
radius = 0.7
height = 1.0

[sub_resource type="StandardMaterial3D" id=6]
albedo_color = Color(0.4, 0.8, 0.5, 1)

[sub_resource type="StandardMaterial3D" id=7]
albedo_color = Color(0.35, 0.55, 0.9, 1)

[sub_resource type="StandardMaterial3D" id=8]
albedo_color = Color(0.9, 0.6, 0.2, 1)

[sub_resource type="BoxMesh" id=9]
size = Vector3(2.2, 1.4, 4.4)

[sub_resource type="StandardMaterial3D" id=10]
albedo_color = Color(0.95, 0.85, 0.2, 1)
metallic = 0.1

[node name="Game" type="Node3D"]
script = ExtResource(1)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource(4)

[node name="Sun" type="DirectionalLight3D" parent="."]
rotation_degrees = Vector3(-55, 35, 0)
light_energy = 1.2
shadow_enabled = true

[node name="Camera" type="Camera3D" parent="."]
translation = Vector3(0, 48, 46)
rotation_degrees = Vector3(-55, 0, 0)
current = true
fov = 55.0

[node name="LogisticsRoot" type="Node3D" parent="."]
script = ExtResource(3)
marker_mesh = SubResource(5)
vehicle_mesh = SubResource(9)
branch_material = SubResource(6)
depot_material = SubResource(7)
hub_material = SubResource(8)
vehicle_material = SubResource(10)

[node name="MapPlane" type="MeshInstance3D" parent="LogisticsRoot"]
mesh = SubResource(1)
material_override = SubResource(4)
rotation_degrees = Vector3(-90, 0, 0)

[node name="Locations" type="Node3D" parent="LogisticsRoot"]

[node name="Routes" type="Node3D" parent="LogisticsRoot"]

[node name="Vehicles" type="Node3D" parent="LogisticsRoot"]

[node name="HUDLayer" type="CanvasLayer" parent="."]

[node name="HUD" parent="HUDLayer" instance=ExtResource(2)]
